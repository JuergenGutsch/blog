<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta content="en-us" http-equiv="Content-Language" />
		<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
		<link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Blog Feed" />
		<link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Blog Feed" />
		<title>DNX libraries vs. UWP libraries</title>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
		<link href="/css/prism.css" rel="stylesheet" type="text/css" />
		<link href="/css/style.css" rel="stylesheet" type="text/css" />
		<link href="/css/jquery.cookiebar.css" rel="stylesheet" type="text/css"/>
		<link rel="shortcut icon" href="/img/favicon.ico" />
		
		<meta property="og:title" content="DNX libraries vs. UWP libraries" />
		<meta property="og:site_name" content="ASP.NET Hacker">
		<meta property="og:url" content="http://asp.net-hacker.rocks/_drafts/2015/12/01/dnx-vs-uwp.html" />
		<meta property="og:description" content="in this blog post I wanted to write about the differences of DNX libraries and UWP  libraries. Are there any? How do we support UWP in DNX libraries and it is possible to support .NET Core in WP libraries? Let's have a look." />
		<meta property="fb:app_id" content="126274111070499" />
		<meta property="og:type" content="article" />
		<meta property="og:locale" content="en_US" />		
		<meta property="article:author" content="https://www.facebook.com/juergen.gutsch" />
		<meta property="article:publisher" content="https://www.facebook.com/juergen.gutsch" />

		<meta name="twitter:card" content="summary" />
		<meta name="twitter:site" content="@sharpcms" />
		<meta name="twitter:title" content="DNX libraries vs. UWP libraries" />
		<meta name="twitter:description" content="in this blog post I wanted to write about the differences of DNX libraries and UWP  libraries. Are there any? How do we support UWP in DNX libraries and it is possible to support .NET Core in WP libraries? Let's have a look." />
		<meta name="twitter:image" content="http://asp.net-hacker.rocks/img/cardlogo-dark.png" />
	</head>
	<body>
		<div id="container">
			<div id="header">
				<a href="/" id="home" title="Home" alt="Home"><img src="/img/logo-dark.png" alt="ASP.NET Hacker" /></a>
				<div class="section">
					<ul>
						<li><a href="/about.html">about</a></li>
						<li id="feedlink"><a href="http://feeds.feedburner.com/jgutsch"><span class="fa fa-rss">&nbsp;</span> feed</a></li>
					</ul>
				</div>
			</div>
			<div id="content">
				<article>
	<header>
		<h1> DNX libraries vs. UWP libraries </h1>
		<p class="postdate">Jürgen Gutsch -  1 Dezember, 2015</p>
		<ul class="postdate">
		
			<li><a href="#">ASP.NET 5</a></li>
		
			<li><a href="#">.NET Core</a></li>
		
			<li><a href="#">Portable Libraries</a></li>
		
			<li><a href="#">Universal Windows Platform</a></li>
		
		</ul>
	</header>
	
	<p>Universal Windows Platform (UWP) libraries and DNX libraries are almost equal, they use the same new project type based on a project.json configuration file. Both project types are using NuGet to reference libraries. In fact these libraries are equal, except one small thing. DNX Libraries are creating NuGet Packages on build/publish and UWP libraries are creating unpacked DLLs.</p>
<p>If you want to migrate your library to .NET Core, you can one of those project types. You only need to decide whether to create only the DLLs or to create NuGet Packages. In Both cases you are able to be compatible to .NET Core, UWP, or any other Platform or framework.</p>
<h2>Really?</h2>
<p>Yes, it is like this. :) In Visual Studio 2015 I created a solution with two projects. One of them is a UWP library and the other one is a DNX library:
<img src="/img/core-vs-uwp/projects.png" alt="" /></p>
<p>They look almost similar, but let's have a look at the project.json files. This is the project.json of the DNX library:</p>
<pre><code class="language-jsonp">{
  &quot;version&quot;: &quot;1.0.0-*&quot;,
  &quot;description&quot;: &quot;ClassLibrary5 Class Library&quot;,
  &quot;authors&quot;: [ &quot;Juergen&quot; ],
  &quot;tags&quot;: [ &quot;&quot; ],
  &quot;projectUrl&quot;: &quot;&quot;,
  &quot;licenseUrl&quot;: &quot;&quot;,

  &quot;frameworks&quot;: {
    &quot;net451&quot;: { },
    &quot;dotnet5.4&quot;: {
      &quot;dependencies&quot;: {
        &quot;Microsoft.CSharp&quot;: &quot;4.0.1-beta-23516&quot;,
        &quot;System.Collections&quot;: &quot;4.0.11-beta-23516&quot;,
        &quot;System.Linq&quot;: &quot;4.0.1-beta-23516&quot;,
        &quot;System.Runtime&quot;: &quot;4.0.21-beta-23516&quot;,
        &quot;System.Threading&quot;: &quot;4.0.11-beta-23516&quot;
      }
    }
  }
}
</code></pre>
<p>And this is the project.json of the UWP library:</p>
<pre><code class="language-jsonp">{
  &quot;dependencies&quot;: {
    &quot;Microsoft.NETCore.UniversalWindowsPlatform&quot;: &quot;5.0.0&quot;
  },
  &quot;frameworks&quot;: {
    &quot;uap10.0&quot;: {}
  },
  &quot;runtimes&quot;: {
    &quot;win10-arm&quot;: {},
    &quot;win10-arm-aot&quot;: {},
    &quot;win10-x86&quot;: {},
    &quot;win10-x86-aot&quot;: {},
    &quot;win10-x64&quot;: {},
    &quot;win10-x64-aot&quot;: {}
  }
}
</code></pre>
<p>In the DNX libaries, you can also have a &quot;dependency&quot; item in the root to specify dependencies which can be used in both frameworks. Let's create a DNX library which supports UWP:</p>
<pre><code class="language-jsonp">
&quot;frameworks&quot;: {
  &quot;net451&quot;: { },
  &quot;dotnet5.4&quot;: {
    &quot;dependencies&quot;: {
      &quot;Microsoft.CSharp&quot;: &quot;4.0.1-beta-23516&quot;,
      &quot;System.Collections&quot;: &quot;4.0.11-beta-23516&quot;,
      &quot;System.Linq&quot;: &quot;4.0.1-beta-23516&quot;,
      &quot;System.Runtime&quot;: &quot;4.0.21-beta-23516&quot;,
      &quot;System.Threading&quot;: &quot;4.0.11-beta-23516&quot;
    }
  },
  &quot;uap10.0&quot;: {
    &quot;dependencies&quot;: {
      &quot;Microsoft.NETCore.UniversalWindowsPlatform&quot;: &quot;5.0.0&quot;
    }
  }
}
</code></pre>
<p>I added the dependency directly to the specific framework, because this guy will not be compatible with the other frameworks. This library will restore the missing packages when you save the project.json</p>
<p>I'm also able to add .NET Core support to the UWP library:</p>
<pre><code class="language-jsonp">&quot;frameworks&quot;: {
  &quot;uap10.0&quot;: {
    &quot;dependencies&quot;: {
      &quot;Microsoft.NETCore.UniversalWindowsPlatform&quot;: &quot;5.0.0&quot;
    }
  },
  &quot;dotnet5.4&quot;: {
    &quot;dependencies&quot;: {
      &quot;Microsoft.CSharp&quot;: &quot;4.0.1-beta-23516&quot;,
      &quot;System.Collections&quot;: &quot;4.0.11-beta-23516&quot;,
      &quot;System.Linq&quot;: &quot;4.0.1-beta-23516&quot;,
      &quot;System.Runtime&quot;: &quot;4.0.21-beta-23516&quot;,
      &quot;System.Threading&quot;: &quot;4.0.11-beta-23516&quot;
    }
  }
}
</code></pre>
<p>The missing NuGet Packages will be restored, if you build this library. By the way: There already are conditional compiler symbols defined in the Build options to switch between .NET Core and UWP specific implementations:
<img src="/img/core-vs-uwp/uwp-build-options.png" alt="" /></p>
<pre><code class="language-csharp">#if NETFX_CORE
        // access .NET Core specific APIs here
#endif

#if WINDOWS_UWP
        // access UWP specific APIs here
#endif
</code></pre>
<p>While migrating LightCore to DNX Projects I used this to differ between .NET Framework and .NET Core specific implementations:</p>
<pre><code class="language-csharp">        public void InjectProperties(object instance)
        {
#if !DNXCORE50
            instance
                .GetType()
                .GetProperties(BindingFlags.Public | BindingFlags.Instance | BindingFlags.SetProperty)
                .Where(this._validPropertiesSelector)
                .ForEach(p =&gt; p.SetValue(instance, this.Resolve(p.PropertyType), null));
#else
            instance
                .GetType()
                .GetProperties(BindingFlags.Public | BindingFlags.Instance)
                .Where(_validPropertiesSelector)
                .ForEach(p =&gt; p.SetValue(instance, Resolve(p.PropertyType), null));
#endif
        }
</code></pre>
<h2>Conclusion</h2>
<p>With this knowledge in mind it makes much more sense to migrate your library projects to DNX projects or to UWP projects to make your library compatible to many more platforms. Using this project types it is pretty simple to provide your features to much more platforms with a single code base.</p>
<p>In the past I used multiple project files with shared code files to create libraries for more than one .NET Framework. Now I only need to add the additional framework to the project.json.</p>
		
	<footer>
		<div>
			<p>
				<img src="/img/guj.png" alt="Jürgen Gutsch" />
				<strong>Jürgen Gutsch</strong><br>
				<a href="https://twitter.com/sharpcms/" target="_blank"><strong>@sharpcms</strong></a><br>
				<span>.NET junkie, addicted to web and software development, clean coder, MVP for Visual Studio and Development Technologies</span>
			</p>
		</div>
		<div id="page-navigation clear"> 
			<div class="left">  <a href="/2015/11/25/viewcomponents-aspnet5.html" title="Previous Post: View Components in ASP.NET 5">&larr; View Components in ASP.NET 5</a>  </div> 
			<div class="right">  <a href="/2015/12/01/vs2015u1-typescript17.html" title="next Post: VS 2015 Update 1, TypeScript 1.7 and some more">VS 2015 Update 1, TypeScript 1.7 and some more &rarr; </a>  </div> 
			<div class="clear">&nbsp;</div>
		</div> 
				
		
		<div id="disqus_thread"></div>
		<script>
		/**
		* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
		* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
		*/
		
		var disqus_config = function () {
			this.page.url = location.href; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = location.pathname; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		};
		
		(function() { // DON'T EDIT BELOW THIS LINE
		var d = document, s = d.createElement('script');
		
		s.src = '//aspnethacker.disqus.com/embed.js';
		
		s.setAttribute('data-timestamp', +new Date());
		(d.head || d.body).appendChild(s);
		})();
		</script>
		<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
		
	</footer>
</article>
			</div>
			<div id="footer">
				<div class="left">
					<p>Friends blogs</p>
					<ul>
						<li><a target="_blank" href="http://www.aspnetzone.de/blogs/stefanfalz/">Stefan Falz</a></li>
						<li><a target="_blank" href="http://blogs.dotnetgerman.com/">DotNetGerman Bloggers</a></li>
						<li><a target="_blank" href="https://www.norberteder.com/">Norbert Eder</a></li>
						<li><a target="_blank" href="https://thomasbandt.com/">Thomas goes .NET</a></li>
						<li><a target="_blank" href="http://blog.alexonasp.net/">Alexander Zeitler</a></li>
						<li><a target="_blank" href="http://www.karsan.de/">Karsten Samaschke</a></li>
						<li><a target="_blank" href="http://weblogs.asp.net/scottgu/default.aspx">ScottGu's Blog</a></li>
						<li><a target="_blank" href="http://blog.codeinside.eu/">Robert Mühsig & Oliver Guhr</a></li>
						<li><a target="_blank" href="http://blog.ppedv.de/author/hannesp.aspx">Hannes Preishuber</a></li>
						<li><a target="_blank" href="http://www.hanselman.com/blog/">Scott Hanselman</a></li>
						<li><a target="_blank" href="http://weblog.west-wind.com/">Rick Strahl's Web Log</a></li>
						<li><a target="_blank" href="http://odetocode.com/blogs/all">K. Scott Allen</a></li>
						<li><a target="_blank" href="http://davidfowl.com/">David Fowler</a></li>
					</ul>
				</div>
				<div class="right">
					<p>My favorite Books</p>
					<ul>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/3955619869/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=3955619869&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=CGQXKRBPO6Q6JKWY">Entwurfsmuster von Kopf bis Fuß (ger)</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/0321545613/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=0321545613&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=MBAMTH7U7RZNQBIM">Framework Design Guidelines</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/3826655486/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=3826655486&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=F7G5QTOC3DAESHR3">Clean Code: A Handbook of Agile Software Craftsmanship </a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/3826690214/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=3826690214&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=SVR5IU6AKYZUJ5BG">Effektives Arbeiten mit Legacy Code. Refactoring und Testen bestehender Software (ger)</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/B00L6K4SQU/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=B00L6K4SQU&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=35KMIAWR6SRLG3LX">Why Software Sucks...and What You Can Do about It</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/3446223096/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=3446223096&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=SRL355UJYMSA4XYY">Der Pragmatische Programmierer (ger)</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/382669712X/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=382669712X&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=YV7II2PJAALC4VOW">The Art Of Unit Testing</a></li>
						<li><a target="_blank" href="http://www.amazon.de/gp/product/B00MEYK0SC/ref=as_li_tl?ie=UTF8&amp;camp=1638&amp;creative=6742&amp;creativeASIN=B00MEYK0SC&amp;linkCode=as2&amp;tag=gutschonline-21&amp;linkId=ZBLKLEPAR2RVWZB2">Test Driven Development: By Example</a></li>
		            </ul>
				</div>
				<div class="clear"></div>
				<div>					
                    <ul class="social-icons">
                        <li><a href="https://twitter.com/sharpcms" target="_blank"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="https://www.facebook.com/juergen.gutsch" target="_blank"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="https://github.com/JuergenGutsch" target="_blank"><i class="fa fa-github"></i></a></li>
                        <li><a href="https://bitbucket.org/JuergenGutsch" target="_blank"><i class="fa fa-bitbucket"></i></a></li>
                        <li><a href="https://www.linkedin.com/in/juergengutsch" target="_blank"><i class="fa fa-linkedin"></i></a></li>
                        <li><a href="https://www.xing.com/profiles/Juergen_Gutsch2" target="_blank"><i class="fa fa-xing"></i></a></li>
                        <li><a href="http://feeds.feedburner.com/jgutsch" target="_blank"><i class="fa fa-rss"></i></a></li>
                    </ul>

				</div>
			</div>
		</div>
		<script src="/js/prism.js"></script>
		<script>
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			
			ga('create', 'UA-390207-7', 'auto');
			ga('send', 'pageview');
			
		</script>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>		
		<script type="text/javascript" src="/js/jquery.cookiebar.js"></script>		
		<script>
			if($){
				$(document).ready(function(){
					$.cookieBar({
					});
				});
			}
		</script>
	</body>
</html>